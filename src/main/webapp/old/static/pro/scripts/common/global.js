define(function(e,t,r){function n(){}n.prototype.isIE=function(e){var t=navigator.userAgent.toLowerCase();return/msie/.test(t)&&!/opera/.test(t)&&(t.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1]==""+e+".0"},n.prototype.isIE78=function(){return n.prototype.isIE(7)||n.prototype.isIE(8)},n.prototype.isIE789=function(){return n.prototype.isIE(7)||n.prototype.isIE(8)||n.prototype.isIE(9)},n.prototype.isWeChat=function(){var e=navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)},n.prototype.getBrower=function(){var e,t={},r=navigator.userAgent.toLowerCase();return(e=r.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=r.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=r.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=r.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=r.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t},n.prototype.scrollBarWidth=function(){var e,t,r=document.createElement("p"),n={width:"100px",height:"100px",overflowY:"scroll"};for(e in n)r.style[e]=n[e];return document.body.appendChild(r),t=r.offsetWidth-r.clientWidth,r.remove(),t},n.prototype.windowElement=function(){var e=window.screen;return{resolutionTop:e.screenTop||e.availTop,resolutionLeft:e.screenLeft||e.availLeft,resolutionWidth:e.width,resolutionHeight:e.height,resolutionEnableWidth:e.availWidth,resolutionEnableHeight:e.availHeight,resolutionColorDepth:e.colorDepth,resolutionSize:e.deviceXDPI||e.pixelDepth}},n.prototype.htmlEncode=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e},n.prototype.date=function(e,t,r,n){var o=typeof t,r="undefined"!=typeof r?r:"-";n="undefined"!=typeof n?n:":";var a=null;if("string"==o||"number"==o)var i=new Date(t);else if("object"==o)var i=t;else var i=new Date;var s=i.getFullYear(),p=i.getMonth()+1,l=i.getDate(),c=i.getHours(),d=i.getMinutes(),u=i.getSeconds(),f=function(e,t){for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];a=a<10?"0"+a:a,r.push(a)}return r.join(t)};switch(e){case"YM":a=f([s,p],r);break;case"MD":a=f([p,l],r);break;case"HI":a=f([c,d],n);break;case"HIS":a=f([c,d,u],n);break;case"IS":a=f([d,u],n);break;case"YMDHI":a=f([s,p,l],r)+" "+f([c,d],n);break;case"YMDHIS":a=f([s,p,l],r)+" "+f([c,d,u],n);break;case"YMD":a=f([s,p,l],r);break;default:a=f([s,p,l],r)}return a},n.prototype.cookie=function(e,t,r){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),a=0,i=o.length;a<i;a++){var s=jQuery.trim(o[a]);if(s.substring(0,e.length+1)==e+"="){n=decodeURIComponent(s.substring(e.length+1));break}}return n}r=r||{},null===t&&(t="",r=$.extend({},r),r.expires=-1);var p="";if(r.expires&&("number"==typeof r.expires||r.expires.toUTCString)){var l;"number"==typeof r.expires?(l=new Date,l.setTime(l.getTime()+24*r.expires*60*60*1e3)):l=r.expires,p="; expires="+l.toUTCString()}var c=r.path?"; path="+r.path:"",d=r.domain?"; domain="+r.domain:"",u=r.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),p,c,d,u].join("")};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype.encode64=function(e){e=escape(e);var t,r,n,a,i,s="",p="",l="",c=0;do t=e.charCodeAt(c++),r=e.charCodeAt(c++),p=e.charCodeAt(c++),n=t>>2,a=(3&t)<<4|r>>4,i=(15&r)<<2|p>>6,l=63&p,isNaN(r)?i=l=64:isNaN(p)&&(l=64),s=s+o.charAt(n)+o.charAt(a)+o.charAt(i)+o.charAt(l),t=r=p="",n=a=i=l="";while(c<e.length);return s},n.prototype.decode64=function(e){var t,r,n,a,i,s="",p="",l="",c=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(e)&&console&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=o.indexOf(e.charAt(c++)),a=o.indexOf(e.charAt(c++)),i=o.indexOf(e.charAt(c++)),l=o.indexOf(e.charAt(c++)),t=n<<2|a>>4,r=(15&a)<<4|i>>2,p=(3&i)<<6|l,s+=String.fromCharCode(t),64!=i&&(s+=String.fromCharCode(r)),64!=l&&(s+=String.fromCharCode(p)),t=r=p="",n=a=i=l="";while(c<e.length);return unescape(s)},n.prototype.addFavorite=function(e,t){try{window.external.addFavorite(e,t)}catch(r){try{window.sidebar.addPanel(e,t,"")}catch(r){alert("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加")}}},n.prototype.setHome=function(e,t){try{e.style.behavior="url(#default#homepage)",e.setHome(t)}catch(r){if(!window.netscape)return alert("您的浏览器不支持此操作\n请使用浏览器的“选项”或“设置”等功能设置首页"),!1;try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(r){alert("此操作被浏览器拒绝！\n请在浏览器地址栏输入“about:config”并回车\n然后将 [signed.applets.codebase_principal_support]的值设置为'true',双击即可。")}var n=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);n.setCharPref("browser.startup.homepage",t)}},n.prototype.deepCopyObj=function(e){var t={};for(var r in e)t[r]="object"==typeof e[r]?n.prototype.deepCopyObj(e[r]):e[r];return t},n.prototype.jsonBeautify=function(e){function t(e,r,n){var o="10px",a="5px",i=document.createElement("div");i.style.listStyle="none",i.style.paddingLeft="0",i.style.fontFamily='Consolas, "Liberation Mono", Menlo, Courier, monospace',i.style.color="#202020",i.style.fontSize="12px";var s=document.createElement("p"),p=document.createElement("p"),l=document.createElement("p");s.style.margin=p.style.margin=l.style.margin=a+" 0",s.style.paddingLeft=p.style.paddingLeft=l.style.paddingLeft=o,l.style.marginLeft="0",i.appendChild(s),i.appendChild(p),e instanceof Array?(s.innerHTML="<span style='color:#a71d5d'>\""+r+'"</span> : [',r||(s.innerHTML="["),l.innerHTML=n?"]":"],"):(s.innerHTML="<span style='color:#a71d5d'>\""+r+'"</span> : {',r||(s.innerHTML="{"),l.innerHTML=n?"}":"},");var c,d=0,u=0;for(c in e)e.hasOwnProperty(c)&&d++;for(c in e)if(e.hasOwnProperty(c)){u+=1;var f="<span style='color:#a71d5d'>\""+c+'"</span> : ';e instanceof Array&&(f="");var y=e[c];if("number"==typeof e[c]&&(y="<span style='color:#0086b3'> "+y+" </span>"),"string"==typeof e[c]&&(y="<span style='color:#239141'> \""+y+'" </span>'),"boolean"==typeof e[c]&&(y="<span style='color:#a71d5d'> "+y+" </span>"),"undefined"==typeof e[c]&&(y="<span style='color:#969896'> "+y+" </span>"),"object"==typeof e[c]){if(null!=e[c]){var g;g=e instanceof Array?u>=d?t(e[c],null,!0):t(e[c],null,!1):u>=d?t(e[c],c,!0):t(e[c],c,!1),p.appendChild(g);continue}y="<span style='color:#aa3022'> null </span>"}var h=document.createElement("p");h.style.paddingLeft=o,h.style.margin=a+" 0",h.innerHTML=f+y+",<br>",u>=d&&(h.innerHTML=h.innerHTML.replace(",","")),p.appendChild(h)}return i.appendChild(p),i.appendChild(l),i}var r=e.innerHTML;try{var n=JSON.parse(r);e.innerHTML="",e.appendChild(t(n,null,!0))}catch(o){e.innerHTML=r,console.log("Json 格式不合法,不做格式化处理")}},n.prototype.headBeautify=function(e){var t=document.querySelector(e),r=t.innerHTML,n=r.trim().split("\n"),o=document.createElement("table");o.style.fontFamily='Consolas, "Liberation Mono", Menlo, Courier, monospace',o.style.fontSize="12px",o.style.width="100%",o.style.borderSpacing="1px",n.some(function(e){var t=document.createElement("tr");t.style.wordWrap="break-word",t.style.wordBreak="break-all",t.style.width="100%",t.style.display="block",t.style.marginBottom="5px";var r=e.substr(0,e.indexOf(":")).trim(),n=e.substr(e.indexOf(":")+1).trim();t.innerHTML="<td style='text-align: right;font-weight: bolder;white-space: nowrap;'>"+r+"</td><td style='text-align: center;font-weight: bolder'>:</td><td>"+n+"</td>",o.appendChild(t)}),t.innerHTML="",t.appendChild(o)},n.prototype.getUrlVal=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?decodeURI(r[2]):null},n.prototype.getSessionStorage=function(e){var t;return window.sessionStorage&&(t=JSON.parse(window.sessionStorage.getItem(e))),t},n.prototype.setSessionStorage=function(e,t){t=JSON.stringify(t),window.sessionStorage&&window.sessionStorage.setItem(e,t)},n.prototype.getLocalStorage=function(e){var t;return window.localStorage&&(t=JSON.parse(window.localStorage.getItem(e))),t},n.prototype.setLocalStorage=function(e,t){t=JSON.stringify(t),window.localStorage&&window.localStorage.setItem(e,t)},r.exports={GiGoldTool:n}});