<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <title>独孤九剑系统</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="./css/3rd/jquery.jsonview.css">
    <link rel="stylesheet" href="./css/3rd/FreeSearch.css">
    <link rel="stylesheet" href="./css/css.css?v=4">
    <link rel="stylesheet" href="./css/defined.css?v=4">
    <script src="js/3rd/jquery.js"></script>
    <script src="js/3rd/jquery.jsonview.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="js/3rd/vue.js"></script>
    <script src="js/3rd/FreeSearch.js"></script>
    <style type="text/css">
        [v-cloak] {
            display: none;
        }
    </style>
</head>
<body>
<nav id="nav" class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand innerShadowhite" href="projects.html">独孤九剑接口管理系统 <span id="loadingTag" class="glyphicon glyphicon-refresh" style="display: none"></span></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="navbar-form navbar-left">
                <div class="input-group">
                    <input id="ifSearchInput" type="text" class="ifSearchInput form-control" placeholder="ID、名称、地址、作者">
                    <div class="input-group-btn">
                        <button id="globalSearch1" type="button" class="btn btn-theme innerShadowhite"><span class="glyphicon glyphicon-search"></span></button>
                        <button type="button" class="btn btn-theme dropdown-toggle innerShadowhite" data-toggle="dropdown"><span class="caret"></span></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                            <li id="globalSearch2" role="presentation"><a role="menuitem" tabindex="-1" href="#">全局搜索</a></li>
                            <li id="scopeSearch" role="presentation"><a role="menuitem" tabindex="-1" href="#">当前系统</a></li>
                        </ul>
                    </div><!-- /btn-group -->
                </div><!-- /input-group -->
            </div>
            <ul v-cloak class="nav navbar-nav">
                <li class="navbar-btn">
                    <div class="dropdown" id="switchList">
                        <button v-if="sysList.length>0" id="btn-switchList" class="btn btn-theme innerShadowhite" type="button">
                            <span class="glyphicon glyphicon-tower"></span>
                            {{defaultText}}
                            <span class="caret"></span>
                        </button>
                        <div id="sysListFrame" class="switchList">
                            <div id="sysList" class="list-group" style="z-index:99;position:absolute;left:0;">
                                <div style="max-height: 400px;overflow-y: auto">
                                    <a v-for="sys in sysList" href="#" class="list-group-item list-group-item-theme" v-on:mouseover="showProList(sys.id)">{{sys.sysName}}
                                        <span style="font-size: 12px;float: right" class="glyphicon glyphicon-chevron-right"></span>
                                    </a>
                                </div>
                                <a v-if="canEditSys" class="list-group-item list-group-item-theme themesColor" style="cursor:pointer" @click="createSys"><span class="glyphicon glyphicon-plus"></span> 新建系统</a>
                            </div>

                            <div id="proList" class="list-group" style="z-index: 98;position:absolute;">
                                <div style="max-height: 400px;overflow-y: auto">
                                    <a v-for="pro in allProList" v-if="pro.sysId==sysId" href="?ifProId={{pro.id}}&ifSysId={{sysId}}" class="list-group-item">{{pro.proName}}</a>
                                </div>
                                <a v-if="canEditSys" class="list-group-item list-group-item-theme themesColor" style="cursor:pointer" @click="createPro(sysId)"><span class="glyphicon glyphicon-plus"></span> 新建产品</a>
                            </div>

                        </div>
                    </div>
                </li>
                <li v-cloak v-if="btnCreateIf.visible" class="navbar-btn btn-group" style="margin-left:15px">
                    <button id="createInterface" class="btn btn-theme" @click="createInterface"><span class="glyphicon glyphicon-certificate"></span> 创建接口</button>
                    <button type="button" class="btn btn-theme dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                        <li role="presentation" @click="createInterfaces"><a role="menuitem" tabindex="-1" href="#"><span class="glyphicon glyphicon-sort-by-attributes"></span> 批量添加接口</a></li>
                    </ul>
                </li>
                <li class="navbar-btn" id="interfaceControl" style="margin-left: 15px">
                    <template v-if="editorController.btnController.visible">
                        <div id="interfaceDetail_container_editor_operations" class="btn-group">
                            <button id="btn-saveIfChanges" @click="saveInterfaceChanges" type="button" class="{{saveBtnStatues}} btn btn-success"><span class="{{saveBtnStatues=='disabled'?'glyphicon glyphicon-asterisk':'glyphicon glyphicon-flash'}}"></span>快速保存</button>
                            <button type="button" class="{{saveBtnStatues}} btn btn-success dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                <li role="presentation" @click="saveInterfaceChanges('true')"><a role="menuitem" tabindex="-1" href="#"><span class="glyphicon glyphicon-time"></span> 保存并推进版本</a></li>
                            </ul>
                        </div>
                        <button id="btn-returnOutEditor" @click="returnOutOfEditor" type="button" class="btn btn-warning">返回 <span class="glyphicon glyphicon-share-alt"></span></button>
                    </template>
                </li>

                <li class="navbar-btn" style="margin-left: 15px">
                    <button v-if="editorController.btnSwitchEdition.visible" @click="switchInterfaceEditon" id="btn-switchEditon" class="btn btn-theme"  data-toggle="dropdown">
                        <span class="glyphicon glyphicon glyphicon-time"></span> 历史版本
                    </button>
                    <ul v-if="editorController.btnSwitchEdition.visible" class="hisEditions dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                        <li class="hisEdition" v-if="editions.length==0" role="presentation">
                            <a class="normalTextColor" role="menuitem" tabindex="-1" href="#">
                                <h5>
                                    <span class="glyphicon glyphicon-flag"></span>
                                    <span class="version">v{{ifObj.ifVersionNo}} 当前版本</span>
                                </h5>
                                <h6>
                                    <span class="username">{{ifObj.designer}}</span>
                                    <span class="time">{{ifObj.ifCreateTime}}</span>
                                </h6>
                            </a>
                        </li>
                        <li class="hisEdition" v-for="edition in editions" role="presentation" @click="showInterfaceEdition(edition)">
                            <a class="normalTextColor" role="menuitem" tabindex="-1" href="#">
                                <h5>
                                    <span class="glyphicon glyphicon-flag"></span>
                                    <span class="version">v{{edition.ifVerNo}}</span>
                                </h5>
                                <h6>
                                    <span class="username">{{edition.userName}}</span>
                                    <span class="time">{{edition.ts}}</span>
                                </h6>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="navbar-btn" style="margin-left: 15px">
                    <button onclick="location='./projects.html'" class="btn btn-theme">
                        所有项目 <span class="glyphicon glyphicon-share-alt"></span>
                    </button>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div v-cloak id="indexPage" style="display: {{visible?'block':'none'}}">
    <div id="feedList">
        <div v-for="feed in feedList" class="block">
            <h4 class="oper">{{feed.oper}}<span class="ts">{{feed.ts}}</span></h4>
            <p  v-for="detail in feed.changesList">
                <span v-if='detail.optionType == "修改"' class="mod">{{detail.optionType}}</span>
                <span v-if='detail.optionType == "新增"' class="new">{{detail.optionType}}</span>
                <span v-if='detail.optionType == "删除"' class="del">{{detail.optionType}}</span> 了
                <span><a href="?ifId={{detail.ifId}}">[{{detail.ifId}} {{detail.ifName}}]</a> </span>
                <span v-if="detail.changeType">的 {{detail.changeType}}</span>
            </p>
        </div>
    </div>
</div>
<aside id="interfaceList" class="panel panel-default themesColor">
    <ul class="panel-body list-group">
        <li v-cloak id="nav_path" class="list-group-item disabled">
            <ol v-if="sysId==0 && proId==0" class="breadcrumb">
                <li class="active">全部</li>
            </ol>

            <ol v-if="sysId!=0 && proId==0" class="breadcrumb">
                <li><a href="?ifProId=0&ifSysId=0">全部</a></li>
                <li class="active">{{sysName}}</li>
            </ol>

            <ol v-if="sysId!=0 && proId!=0" class="breadcrumb">
                <li><a href="?ifProId=0&ifSysId=0">全部</a></li>
                <li><a href="?ifProId=0&ifSysId={{sysId}}">{{sysName}}</a></li>
                <li class="active">{{proName}}</li>
            </ol>
        </li>
        <li class="list-group-item">.</li>
        <li v-cloak v-for="ifObj in pageInfo.list" @click="showInterfaceDetail(ifObj)" class='list-group-item {{ifObj.id===currentId?"selected":""}}' title="{{ifObj.ifName}}">
            <span class="interfaceListItem">{{ifObj.id}} {{ifObj.ifName}}</span>
            <span title="非幂等" v-if="ifObj.isIdempotent=='N'" class="label-tag label-fx">fx</span>
            <span title="不在测试状态" v-if="ifObj.inAutoTest=='N'" class="label-tag label-autotest"><span class="glyphicon glyphicon-flash"> </span></span>
            <span title="已关注" v-if="ifObj.followed" class="label-tag label-follow"><span class="glyphicon glyphicon-eye-open"> </span></span>
            <!--<button class="deleteInterface btn btn-danger btn-xs" @click.stop="deleteInterface(ifObj,$index,$event)">-->
                <!--<span class="glyphicon glyphicon-trash"></span>-->
            <!--</button>-->
        </li>
    </ul>
    <ul id="interfaceList_pager" class="pager">
        <li id="prePage" data-pageNum="{{pageInfo.prePage}}" class='{{pageInfo.hasPreviousPage?"":"disabled"}}'><a>前一页</a></li>
        <li><a href="#">{{pageInfo.pageNum}}/{{pageInfo.pages}}</a></li>
        <li id="nextPage" data-pageNum="{{pageInfo.nextPage}}" class='{{pageInfo.hasNextPage?"":"disabled"}}'><a>后一页</a></li>
    </ul>
</aside>

<div id="interfaceDetail">
    <!-- 接口明细容器-->
    <div v-cloak id="interfaceDetail_container" style="display: {{visible?'block':'none'}}" class="themesColor">
        <!--基本信息-->
        <div id="basicInfo" class="ifInfoBlock panel-default panel">
            <h3 class="panel-body">
                <span id="ifTitle" class="themesColor">[{{basicInfo.ifId}}] {{basicInfo.ifName}}</span>
                <span id="btn-editIf" @click="editInterfaceDetail" >
                    <span class="glyphicon glyphicon-cog"></span> 编辑接口
                </span>
            </h3>
            <table class="table table-striped table-bordered">
                <tr>
                    <td colspan="3" style="font-weight: 900" ><span class="glyphicon glyphicon-link"></span> 路径名：<span id="ifUrl" data-toggle="tooltip" data-placement="top" title="{{basicInfo.ifUrl}}">{{basicInfo.ifUrl}}</span></td>
                </tr>
                <tr>
                    <td><span class="glyphicon glyphicon-user"></span> 设计者：<span id="designer">{{basicInfo.designer}}</span></td>
                    <td><span class="glyphicon glyphicon-globe"></span> 请求方式：<span id="ifType">{{basicInfo.ifType}}</span></td>
                    <td><span class="glyphicon glyphicon-flag"></span> 当前版本：<span id="ifVersionNo">V{{basicInfo.ifVersionNo}}</span><span class="glyphicon glyphicon-time"></span></td>

                </tr>
                <tr>
                    <td><span class="glyphicon glyphicon-th-large"></span> 所属系统：<span id="sysName">{{basicInfo.sysName}}</span></td>
                    <td><span class="glyphicon glyphicon-download-alt"></span> 返回类型：<span id="returnType">{{basicInfo.returnType}}</span></td>
                    <td><span class="glyphicon glyphicon-leaf"></span> 幂等性：<span id="isIdempotent">{{basicInfo.isIdempotent=='Y'?"幂等":"非幂等"}}</span></td>
                </tr>
                <tr>
                    <td><span class="glyphicon glyphicon-th"></span> 所属产品：<span id="proName">{{basicInfo.proName}}</span></td>
                    <td><span class="glyphicon glyphicon-transfer"></span> 接口协议：<span id="ifProtocol">{{basicInfo.ifProtocol}}</span></td>
                    <td><span class="glyphicon glyphicon-tree-deciduous"></span> 创建时间：<span id="ifCreateTime">{{basicInfo.ifCreateTime}}</span></td>
                </tr>
                <tr>
                    <td colspan="3"><span class="glyphicon glyphicon-cog"></span> 获取MOCK：
                        <span id="debugUrl">
                            <a class="get-view link-active" href="../interfaceDebug.do?sys={{basicInfo.ifProId}}&ifUrl={{basicInfo.ifUrl}}" target="_blank">
                                <i>{{originHost}}/interfaceDebug.do?sys={{basicInfo.ifProId}}&ifUrl=</i>{{basicInfo.ifUrl}}
                            </a>
                        </span>
                        <a @click="toggleLinkShow('mock')" style="color: #666"><span class="glyphicon glyphicon-eye-open"></span>展开/收缩</a>
                    </td>
                </tr>
                <tr>
                    <td colspan="3"><span class="glyphicon glyphicon-link"></span> 真实地址：
                        <span id="realUrl">
                            <a class="get-view link-active" href="{{pro.addressUrl}} {{basicInfo.ifUrl}}" target="_blank">
                                <i>{{pro.addressUrl}}</i>{{basicInfo.ifUrl}}
                            </a>
                        </span>
                        <a @click="toggleLinkShow('real')" style="color: #666"><span class="glyphicon glyphicon-eye-open"></span>展开/收缩</a>
                    </td>
                </tr>
            </table>
            <div>
                <pre class="normalTextColor" style="border-bottom: none;border-radius: 0 0 4px 4px"><span class="glyphicon glyphicon-comment"></span> 说明:<br>{{basicInfo.ifDesc}}</pre>
            </div>
        </div>
        <!--返回码模板-->
        <div id="returnCodeList" class="panel panel-default ifInfoBlock">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" @click="toggleReturnCodeDisplay('DEF')" class='{{returnCodeDisplay=="DEF"?"active":""}}'>
                    <a class="themesColor">
                        <span class="glyphicon glyphicon-book"></span> 返回码定义：
                    </a>
                </li>
                <li role="presentation" @click="toggleReturnCodeDisplay('HIS')" class='{{returnCodeDisplay=="HIS"?"active":""}}'>
                    <a class="themesColor">
                        <span class="glyphicon glyphicon-dashboard"></span> 其他返回码：
                    </a>
                </li>
            </ul>

            <div v-if="returnCodeDisplay=='DEF'" style="margin-top: 10px">
                <p v-for="returnCode in returnCodeList" class="basicInfo" data-rspCdId="{{returnCode.id}}">
                    <span class="code">{{returnCode.rspCode}}</span>
                    <span>{{returnCode.rspCodeDesc}}</span>
                </p>
            </div>


            <table class="table table-bordered" v-if="returnCodeDisplay=='HIS'">
                <tr>
                    <th>返回码</th>
                    <th>定义</th>
                    <th>出现次数</th>
                    <th>最近出现</th>
                </tr>
                <tr v-for="returnCodeHis in returnCodeHistories">
                    <td>{{returnCodeHis.RSP_CODE}}</td>
                    <td>{{returnCodeHis.RSP_CODE_DESC}}</td>
                    <td>{{returnCodeHis.COUNT}}</td>
                    <td>{{returnCodeHis.TS}}</td>
                </tr>
            </table>
        </div>
        <!-- 请求参数模板 -->
        <div id="reqBody" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor">
                <span class="glyphicon glyphicon-cloud-download"></span> 请求实例(Request Body):
                <div class="jsonview-switch btn-group btn-group-xs">
                    <button type="button" class="btn btn-default {{uiInfo.reqFieldsViewType=='CND'?'active':''}}" @click="switchView(1,'CND')">{;}</button>
                    <button type="button" class="btn btn-default {{uiInfo.reqFieldsViewType=='CNT'?'active':''}}" @click="switchView(1,'CNT')"><span class="glyphicon glyphicon-indent-left"></span></button>
                </div>
            </h5>
            <template v-if="uiInfo.reqFieldsViewType=='CND'">
                <pre>{{reqBody || "无"}}</pre>
            </template>
            <template v-if="uiInfo.reqFieldsViewType=='CNT'">
                <pre>{{reqBodyPure || "无"}}</pre>
                <table class="table table-bordered">
                    <tr><th>参数</th><th>必须</th><th>类型</th><th>说明</th></tr>
                    <tr v-for="field in reqFieldList">
                        <td  style="padding-left:{{5+(field._indent)*30}}px;color: {{field._color}}">{{field.k}}</td>
                        <td>{{field.req?"是":"否"}} <span v-if="!field.req" class="symbol1 themesColor"></span></td>
                        <td>{{typeDic(field.type)}}</td>
                        <td>{{field.note ||"暂未填写说明"}}</td>
                    </tr>
                </table>
            </template>
        </div>

        <!-- 响应参数模板 -->
        <div id="rspBody" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor">
                <span class="glyphicon glyphicon-cloud-upload"></span> 响应实例(Request Body):
                <div class="jsonview-switch btn-group btn-group-xs">
                    <button type="button" class="btn btn-default {{uiInfo.rspFieldsViewType=='CND'?'active':''}}" @click="switchView(2,'CND')">{;}</button>
                    <button type="button" class="btn btn-default {{uiInfo.rspFieldsViewType=='CNT'?'active':''}}" @click="switchView(2,'CNT')"><span class="glyphicon glyphicon-indent-left"></span></button>
                </div>
            </h5>
            <template v-if="uiInfo.rspFieldsViewType=='CND'">
                <pre>{{rspBody || "无"}}</pre>
            </template>
            <template v-if="uiInfo.rspFieldsViewType=='CNT'">
                <pre>{{rspBodyPure || "无"}}</pre>
                <table class="table table-bordered">
                    <tr><th>参数</th><th>类型</th><th>说明</th></tr>
                    <tr v-for="field in rspFieldList">
                        <td  style="padding-left:{{5+(field._indent)*30}}px;color: {{field._color}}">{{field.k}}</td>
                        <td>{{typeDic(field.type)}}</td>
                        <td>{{field.note || "暂未填写说明"}}</td>
                    </tr>
                </table>
            </template>
        </div>

        <!-- 关注列表 -->
        <div id="invokeList" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor panel-body"><span class="glyphicon glyphicon-calendar"></span> 关注列表:<span style="float: right" class="label label-default change-log-switch" @click="toggleInvokeList()"><span class="glyphicon glyphicon-eye-open"></span> 展开/收缩</span></h5>
            <table class="table table-bordered" style='display: {{invokeListShow?"table":"none"}};'>
                <tr>
                    <th>关注者</th>
                    <th>说明</th>
                    <th>关注时间</th>
                </tr>
                <tr v-for="invoke in invokers">
                    <td>{{invoke.userName}}</td>
                    <td>{{invoke.remark}}</td>
                    <td>{{invoke.tmFollow}}</td>
                </tr>
            </table>
        </div>

        <!-- 变更记录 -->
        <div id="changeLogs" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor"><span class="glyphicon glyphicon-calendar"></span> 变更记录:<span style="float: right" class="label label-default change-log-switch" @click="toggleChangeLog()"><span class="glyphicon glyphicon-eye-open"></span> 展开/收缩</span></h5>
            <div style='overflow:hidden;height: {{changeLogsShow?"auto":"0"}};'>
                <div v-for="changelog in changeLogs" class="change-log-box">
                    <h5 class="oper"><span class="glyphicon glyphicon-user"></span> {{changelog.oper}}</h5>
                    <div v-for="changes in changelog.changesList">
                        <p><span class='changes-optionType {{changes.optionType=="新增"?"changes-optionType-create":""}}{{changes.optionType=="删除"?"changes-optionType-delete":""}}{{changes.optionType=="修改"?"changes-optionType-mod":""}}'>{{changes.optionType}}</span> 了 {{changes.changeType || "接口"}}<span class="ts">{{changes.ts}}</span></p>
                        <p class="text-center" v-if="changes.prmVal || changes.nowVal">
                            '{{changes.prmVal}}' → '{{changes.nowVal}}'
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <button id="btn-deleteIf" class="btn btn-danger btn-sm" @click="deleteInterface">
            <span class="glyphicon glyphicon-trash"></span> 删除接口
        </button>
    </div><!-- 接口明细容器结束-->
    <!-- 接口明细编辑容器-->
    <div v-cloak id="interfaceDetail_container_editor"  style="display: {{visible?'block':'none'}}">
        <!--基本信息-->
        <div id="editor_basicInfo" class="ifInfoBlock panel-default panel" >
            <h5 class="themesColor panel-body" style="overflow: visible">
                <span id="editor_tag_basicInfo"><span class="glyphicon glyphicon-th-large"></span> 基本信息</span>
                <!--<span style="float: right">-->
                    <!--<div id="interfaceDetail_container_editor_operations" class="btn-group btn-group-xs">-->
                        <!--<button id="btn-saveIfChanges" @click="saveInterfaceChanges" type="button" class="{{saveBtnStatues}} btn btn-success"><span class="{{saveBtnStatues=='disabled'?'glyphicon glyphicon-asterisk':'glyphicon glyphicon-flash'}}"></span>快速保存</button>-->
                        <!--<button type="button" class="{{saveBtnStatues}} btn btn-success dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>-->
                        <!--<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">-->
                            <!--<li role="presentation" @click="saveInterfaceChanges('true')"><a role="menuitem" tabindex="-1" href="#"><span class="glyphicon glyphicon-time"></span> 保存并推进版本</a></li>-->
                        <!--</ul>-->
                    <!--</div>-->
                    <!--<button id="btn-returnOutEditor" @click="returnOutOfEditor" type="button" class="btn btn-xs btn-warning">返回 <span class="glyphicon glyphicon-share-alt"></span></button>-->
                <!--</span>-->
            </h5>
            <table class="table table-striped table-bordered">
                <tr>
                    <td colspan="2"  style="font-weight: 900" >
                        <div class="input-group input-group-lg themesColor" style="width: 100%">
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-tag"></span><span class="necessary"></span>
                            </span>
                            <input type="text" class="form-control themesColor" placeholder="填写接口名" v-model="basicInfo.ifName">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="input-group" style="width: 100%">
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-link"></span><span class="necessary"></span>
                            </span>
                            <input type="text" class="form-control" placeholder="填写接口路径,不含host"  v-model="basicInfo.ifUrl">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="input-group">
                            <span class="glyphicon glyphicon-globe"></span> 请求方式：
                            <select class="btn-group" v-model="basicInfo.ifType" title="method">
                                <option class="btn btn-default">POST</option>
                                <option class="btn btn-default">GET</option>
                                <option class="btn btn-default">PUT</option>
                                <option class="btn btn-default">DELETE</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <span class="glyphicon glyphicon-transfer"></span> 接口协议：
                        <select v-model="basicInfo.ifProtocol" title="method">
                            <option>HTTP</option>
                            <option>DUBBO</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-th-large"></span> 所属系统：
                        <select v-model="basicInfo.ifSysId">
                            <option v-for="sys in sysList" :value="sys.id">{{sys.sysName}}</option>
                        </select>
                    </td>
                    <td>
                        <span class="glyphicon glyphicon-download-alt"></span> 返回类型：
                        <select v-model="basicInfo.returnType" title="method">
                            <option>JSON</option>
                            <option>文本</option>
                            <option>无</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-th"></span> 所属产品：
                        <select v-model="basicInfo.ifProId">
                            <option v-for="pro in proList" :value="pro.id" v-if="pro.sysId == basicInfo.ifSysId" :selected="basicInfo.ifProId==pro.id?'selected':''">{{pro.proName}}</option>
                        </select>
                    </td>
                    <td>
                        <span class="glyphicon glyphicon-leaf"></span> 幂等性：
                        <select v-model="basicInfo.isIdempotent" title="method">
                            <option value="Y">幂等</option>
                            <option value="N">非幂等</option>
                        </select>
                    </td>
                </tr>
            </table>
            <div class="panel-body">
                <span class="normalTextColor"><span class="glyphicon glyphicon-comment"></span> 说明:</span>
                <textarea style="min-height: 130px" class="form-control" v-model="basicInfo.ifDesc" title="remark">{{basicInfo.ifDesc}}</textarea>
            </div>
            <div class="panel-body">
                <span class="glyphicon glyphicon-user"></span>
                <span class="glyphicon glyphicon-user"></span> 添加关注：
                <div id="editor_invokers_textarea"></div>
            </div>
        </div>
        <!--返回码模板-->
        <div id="editor_returnCodeList" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor panel-body" style="overflow: hidden">
                <span class="glyphicon glyphicon-book"></span> 返回码定义：
                <span class="btn-group addItems btn-group-xs">
                    <button title="增加返回码" class="btn btn-default" @click="addNewRspCd"><span class="glyphicon glyphicon-plus"></span></button>
                    <button id="addRspCdJson" class="btn btn-default" data-toggle="modal" data-target="#editor_modal_box"><span class="glyphicon glyphicon-edit"></span> 批量添加</button>
                </span>
            </h5>
            <table id="editor_returnCodeList_data" class="table table-bordered">
                <tr v-for="returnCode in returnCodeList">
                    <td><input placeholder="请填写返回码" type="text" title="code" class="" v-model="returnCode.rspCode"></td>
                    <td><input placeholder="请填写rspInf" type="text" title="info" class="" v-model="returnCode.rspCodeDesc"></td>
                    <td style="line-height: 30px"><button title="删除返回码" class="btn btn-danger btn-xs" data-index="{{$index}}" @click="deleteCode($index)" ><span class="glyphicon glyphicon-minus"></span></button></td>
                </tr>
            </table>
        </div>
        <!-- 请求参数模板 -->
        <div id="editor_reqBody" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor panel-body">
                <span class="glyphicon glyphicon-cloud-download"></span> 请求实例(Request Body):
                <span class="btn-group btn-group-xs addItems">
                    <button title="增加根节点" class="btn btn-default"  @click="addRootField(1)"><span class="glyphicon glyphicon-plus"></span></button>
                    <button id="addReqJson" class="btn btn-default"  data-toggle="modal" data-target="#editor_modal_box"><span class="glyphicon glyphicon-edit"></span> 导入JSON</button>
                </span>
            </h5>
            <table v-if="reqFields.length>0" class=" table table-bordered">
                <tr><th>参数</th><th>MOCK</th><th>说明</th><th>类型</th><th>必须</th></tr>
                <tr class="field-code-editor" v-for="field in reqFields">
                    <td class="field-input td-operations" style="padding-left:{{(field._indent)*30}}px;color: {{field._color}}">
                        <input class="field-key-input" @blur="checkField(field,1)" type="text" v-model="field.k">
                        <span class="td-operation">
                            <button title="增加同级节点" class="btn btn-sm btn-success" @click='addNewSiblingField(field,1)'><span class="glyphicon glyphicon-align-justify"></span></button>
                            <button title="增加子节点" class="btn btn-sm btn-success" @click='addNewChildField(field,1)'><span class="glyphicon glyphicon-indent-left"></span></button>
                            <button title="删除节点" class="btn btn-sm btn-danger" @click="deleteFields(field,1)"><span class="glyphicon glyphicon-minus"></span></button>
                        </span>
                    </td>
                    <td class="field-input">
                        <input type="text" v-model="field.mock">
                    </td>
                    <td class="field-input"><input type="text" v-model="field.note" placeholder="暂未填写说明"></td>
                    <td class="field-input">
                        <select v-model="field.type">
                            <option value="1">string</option>
                            <option value="2">number</option>
                            <option value="3">object</option>
                            <option value="4">list[obj]</option>
                            <option value="5">boolean</option>
                            <option value="6">null</option>
                            <option value="7">array</option>
                        </select>
                    <td class="td-operations">
                        <label class="checkbox"><input type="checkbox" v-model="field.req"></label>
                        <span class="lineNum">{{$index+1}}</span>
                    </td>
                </tr>
            </table>
        </div>

        <!-- 响应参数模板 -->
        <div id="editor_rspBody" class="panel panel-default ifInfoBlock">
            <h5 class="themesColor panel-body">
                <span class="glyphicon glyphicon-cloud-upload"></span> 响应实例(Request Body):
                <span class="btn-group btn-group-xs addItems">
                    <button title="增加根节点" class="btn btn-default"  @click="addRootField(2)"><span class="glyphicon glyphicon-plus"></span></button>
                    <button id="addRspJson" class="btn btn-default"  data-toggle="modal" data-target="#editor_modal_box"><span class="glyphicon glyphicon-edit"></span> 导入JSON</button>
                </span>
            </h5>
            <table v-if="rspFields.length>0" class="table table-bordered">
                <tr><th>参数</th><th>MOCK</th><th>说明</th><th>类型</th></tr>
                <tr v-for="field in rspFields" class='field-code-editor'>
                    <td class="field-input td-operations" style="padding-left:{{(field._indent)*30}}px;color: {{field._color}}">
                        <input class="field-key-input" @blur="checkField(field,2)" type="text" v-model="field.k">
                        <span class="td-operation">
                            <button title="增加同级节点" class="btn btn-sm btn-success" @click='addNewSiblingField(field,2)'><span class="glyphicon glyphicon-align-justify"></span></button>
                            <button title="增加子节点" class="btn btn-sm btn-success" @click='addNewChildField(field,2)'><span class="glyphicon glyphicon-indent-left"></span></button>
                            <button title="删除节点" class="btn btn-sm btn-danger" @click="deleteFields(field,2)"><span class="glyphicon glyphicon-minus"></span></button>
                        </span>
                    </td>
                    <td class="field-input">
                        <input type="text" v-model="field.mock">
                    </td>
                    <td class="field-input">
                        <input type="text" v-model="field.note"  placeholder="暂未填写说明">
                    </td>
                    <td class="field-input td-operations">
                        <select v-model="field.type">
                            <option value="1">string</option>
                            <option value="2">number</option>
                            <option value="3">object</option>
                            <option value="4">list[obj]</option>
                            <option value="5">boolean</option>
                            <option value="6">null</option>
                            <option value="7">array</option>
                        </select>
                        <span class="lineNum">{{$index+1}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div><!-- 接口明细编辑容器结束-->
    <!--侧边栏导航-->
    <div id="right-side-nav" class="right-side-nav">
        <ul v-if="visible">
            <li class='{{current=="basicInfo"?"active":""}}'><a href="#basicInfo"><span class="glyphicon glyphicon-info-sign"></span> 基本信息</a></li>
            <li class='{{current=="returnCodeList"?"active":""}}'><a href="#returnCodeList"><span class="glyphicon glyphicon-book"></span> 返回码</a></li>
            <li class='{{current=="reqBody"?"active":""}}'><a href="#reqBody"><span class="glyphicon glyphicon-cloud-upload"></span> 请求参数</a></li>
            <li class='{{current=="rspBody"?"active":""}}'><a href="#rspBody"><span class="glyphicon glyphicon-cloud-download"></span> 响应参数</a></li>
            <li class='{{current=="changeLogs"?"active":""}}'><a href="#changeLogs"><span class="glyphicon glyphicon-calendar"></span> 变更记录</a></li>
            <!--<li class='{{current=="settings"?"active":""}}'><a href="#settings"><span class="glyphicon glyphicon-cog"></span> 设置</a></li>-->
            <li><a href=""></a></li>
            <li><a href="#interfaceDetail_container"><span class="glyphicon glyphicon-arrow-up"></span> 回到顶部</a></li>
        </ul>
    </div>
</div>
<!-- 弹出框 -->
<div id="editor_modal_box" class="modal fade">
    <div class="modal-dialog" style="margin-top: 65px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">{{title}}</h4>
            </div>
            <div class='modal-body form-group {{ isJsonValid=="true"?"has-success":(isJsonValid=="unchecked"?"":"has-error")}}'>
                <label class="control-label" v-if='isJsonValid=="false"'>JSON 格式不正确</label>
                <label class="control-label" v-if='isJsonValid=="true"'>JSON 校验通过</label>
                <label class="control-label" v-if='isJsonValid=="unchecked"'>请填写JSON</label>
                <pre id="editor_modal_box_content" style="display: none" class="form-control"></pre>
                <textarea id="editor_modal_box_value" class="form-control" title="文本域" v-model="jsonStr">{{jsonStr}}</textarea>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button id="importJson" type="button" class="btn btn-primary">导入</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- 弹出框结束 -->


<!-- 批量添加面板 -->
<div id="interfacesCreateModal" class="modal fade">
    <div class="modal-dialog" style="margin-top: 150px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量添加接口信息</h4>
            </div>
            <!-- Table -->
            <table class="table modal-body">
                <tr><th>接口名</th><th>接口地址</th><th>系统</th><th>产品</th><th>设计者</th></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
                <tr><td>接口名</td><td>接口地址</td><td>系统</td><td>产品</td><td>设计者</td></tr>
            </table>
            <div class="modal-footer">
                <button v-if="falseButtonVisible" type="button" class="btn btn-default" @click="falseButton">{{falseButtonText}}</button>
                <button v-if="trueButtonVisible" type="button" class="btn btn-primary" @click="trueButton">{{trueButtonText}}</button>
            </div>
        </div>
    </div>
</div>

<!-- 系统产品添加面板 -->
<div id="createSysAndPro" class="modal fade">
    <div class="modal-dialog" style="margin-top: 150px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">新增系统、产品</h4>
            </div>
            <div class="table modal-body">
                <template v-if="!isPro">
                    <input class="form-control text-center"  style="margin: 0 auto;width: 60%;" placeholder="系统名称" v-model="sysName">
                </template>
                <template v-if="isPro">
                    <div class="input-group" style="margin:0 auto">
                        <input class="form-control text-center" disabled placeholder="要添加的系统名称" v-model="sysName" style="width: 50%;float: left">
                        <input class="form-control text-center" placeholder="填写产品名称" v-model="proName" style="width: 50%;float: left">
                    </div>
                </template>
                <input class="form-control text-center" style="margin: 1rem auto;width: 60%;" placeholder="描述" v-model="remark">
                <h6 class="text-danger text-center">{{information}}</h6>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" @click="doAddSysPro">确定添加</button>
            </div>
        </div>
    </div>
</div>

<!-- alert界面提示 -->
<div class="modal" id="alert" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" style="margin-top: 250px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">{{title}}</h4>
            </div>
            <pre class="alertText modal-body">{{message}}</pre>
            <div class="modal-footer">
                <button v-if="falseButtonVisible" type="button" class="btn btn-default" @click="falseButton">{{falseButtonText}}</button>
                <button v-if="trueButtonVisible" type="button" class="btn btn-primary" @click="trueButton">{{trueButtonText}}</button>
            </div>
        </div>
    </div>
</div>
<!-- 界面遮罩 -->
<div class="modal fade " id="shader">
    <div class="modal-dialog modal-sm" style="margin-top: 280px">
        <div class="modal-content">
            <div class="modal-body themesColor text-center">{{msg}}
                <span class="glyphicon glyphicon-asterisk"></span>
                <span class="glyphicon glyphicon-asterisk"></span>
                <span class="glyphicon glyphicon-asterisk"></span>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>



<div id="versionLogs" data-version="6" class="modal fade">
    <div class="modal-dialog" style="margin-top: 150px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">更新日志</h4>
            </div>
            <!-- Table -->
            <div class="modal-body">
                <dl>
                    <dt>2017-03-14</dt>
                    <dd>修复导入json时,字符串数组出错的问题</dd>
                </dl>
                <dl>
                    <dt>2017-03-10</dt>
                    <dd>延长session过期时间到2天(原先是2小时)</dd>
                </dl>

                <dl>
                    <dt>2017-02-13</dt>
                    <dd>全站项目化</dd>
                </dl>

                <dl>
                    <dt>2017-01-11</dt>
                    <dd>1.加入了接口状态标识</dd>
                    <dd><span style="float: left" title="非幂等" class="label-tag label-fx">fx</span>: 表示接口不是幂等接口</dd>
                    <dd><span style="float: left" title="不在测试状态"class="label-tag label-autotest"><span class="glyphicon glyphicon-flash"> </span></span>: 表示接口不在自动化测试列表，或者接口没有自动化用例</dd>
                    <dd><span style="float: left" title="已关注"class="label-tag label-follow"><span class="glyphicon glyphicon-eye-open"> </span></span>: 表示你已经关注了改接口</dd>
                    <dd>2.接口删除按钮被移到了接口详情页面最下方，从此接口列表再也没有可操作项了</dd>
                </dl>

                <dl>
                    <dt>2017-01-10</dt>
                    <dd>1.修复了部分游览器按钮大小不一致的BUG</dd>
                    <dd>2.修复了输入框光标跳跃的BUG</dd>
                    <dd>3.修复了回话失效无法跳转主页的BUG</dd>
                    <dd>4.页面标题更新为当前所在系统</dd>
                    <dd>5.编辑按钮从顶部工具条，移到了接口页中</dd>
                </dl>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
</body>
<script src="js/api.js?v=314"></script>
<script src="js/model.js?v=314"></script>
<script src="js/controller.js?v=314"></script>
</html>